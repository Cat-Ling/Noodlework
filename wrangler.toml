# Cloudflare Pages + Next.js Configuration

# Build configuration for Cloudflare Pages
[build]
command = "npm run build"
publish = ".next"

# Next.js on Cloudflare Pages requires @cloudflare/next-on-pages
[build.environment]
NODE_VERSION = "18"
NEXT_TELEMETRY_DISABLED = "1"

# Functions (Workers) configuration
[[functions]]
directory = "functions"

# Compatibility settings
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Routes - these patterns will be handled by Workers
[[routes]]
pattern = "/api/proxy"
function = "proxy"

[[routes]]
pattern = "/api/video"
function = "video"
